<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html">
    <h:head>
        <title></title>        
        <script type="text/javascript">
            function monitorQueue(q) {

                document.getElementById("ajaxqueueId").innerHTML = "";
                if (q.length > 0)
                {
                    //<![CDATA[
                    var report = "";
                    document.getElementById("ajaxqueueId").innerHTML = "<b>TOTAL REQUESTS: </b>" + q.length + "<hr/>";
                    for (var i = 0; i < q.length; i++) {
                        var request = q[i];
                        report += (i + 1) + ".<b>Request Type:</b> " + request.xmlReq + " <b>Source Id:</b> " + request.context.sourceid + "  <b>URL: </b> " + request.url + " <b>Taken Off Queue ?</b>: " + request.fromQueue + "<hr/>";
                    }
                    document.getElementById("ajaxqueueId").innerHTML += report;
                    //]]>
                }
            }
        </script>
    </h:head> 
    <h:body>
        <h:outputScript name="js/jsf.js" library="default" target="head"/> 
        <hr/>
        MONITOR AJAX QUEUE
        <hr/>
        <h:form prependId="false">                                    
            <h:commandButton id="button_1_Id" value="Send 1 (no delay)" action="#{ajaxBean.ajaxAction()}" onclick='jsf.ajax.request(this, event, {execute: "@this", render: "@this"});
                return false;' /> 
            <h:commandButton id="button_2_Id" value="Send 2 (delay:600)" action="#{ajaxBean.ajaxAction()}" onclick='jsf.ajax.request(this, event, {delay: 600, execute: "@this", render: "@this"});
                return false;' />  
            <h:commandButton id="button_3_Id" value="Send 3 (delay:1000)" action="#{ajaxBean.ajaxAction()}" onclick='jsf.ajax.request(this, event, {delay: 1000, execute: "@this", render: "@this"});
                return false;' />  
        </h:form>          
        AJAX QUEUE CONTENT:
        <div id="ajaxqueueId"></div>        
    </h:body>
</html>

